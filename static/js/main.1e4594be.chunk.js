(this.webpackJsonpsushi=this.webpackJsonpsushi||[]).push([[0],{61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(39),r=a.n(s),i=(a(73),a(25)),j=a.n(i),l=a(35),o=a(16),d=(a(75),a(27)),b=a(28),h=a(31),u=a(30),O=a(64),x=a(12),m=a(19),p=a(2),g=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(O.a,{children:Object(p.jsxs)("div",{className:"rel",children:[Object(p.jsx)("img",{className:"relative-img",src:"/PIW6Semestr/sushi.jpg",alt:"sushi"}),Object(p.jsxs)("div",{className:"rel-text",children:[Object(p.jsxs)("h1",{id:"jumbo-title",children:[Object(p.jsx)("span",{class:"red-span",children:"BEST SUSHI"})," IN TOWN!"]}),Object(p.jsx)("h2",{children:"Try it out!"}),Object(p.jsx)(m.b,{className:"nav-link-no-pad",to:"/menu",children:Object(p.jsx)(x.a,{children:"ORDER NOW"})})]})]})})})}}]),a}(c.a.Component),f=a(13),v=a(10),C=a(6),N=a(47),y=(a(60),a(66)),w=(a(81),a(83),y.a.initializeApp({apiKey:"AIzaSyCcgL6TWg3DXDz42fAIcaRJth_9C9tX0HE",authDomain:"sushi-lab-piw.firebaseapp.com",databaseURL:"https://sushi-lab-piw-default-rtdb.europe-west1.firebasedatabase.app",projectId:"sushi-lab-piw",storageBucket:"sushi-lab-piw.appspot.com",messagingSenderId:"1028604017726",appId:"1:1028604017726:web:0b88980995e12419cca56f",measurementId:"G-41QNC1NFFB"})),k=w.auth(),S=w,P=c.a.createContext(),I=function(e){var t=e.children,a=Object(n.useState)(),c=Object(o.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(!0),j=Object(o.a)(i,2),l=j[0],d=j[1];Object(n.useEffect)((function(){return k.onAuthStateChanged((function(e){r(e),d(!1)}))}),[]);var b={currentUser:s,signup:function(e,t){return k.createUserWithEmailAndPassword(e,t)},signin:function(e,t){return k.signInWithEmailAndPassword(e,t)},signout:function(){return k.signOut()}};return Object(p.jsx)(P.Provider,{value:b,children:!l&&t})},E=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={login:"",password:"",error:""},e.onEmailChange=function(t){var a=t.target.value;e.setState({login:a})},e.onPasswordChange=function(t){var a=t.target.value;e.setState({password:a})},e.onLogin=function(){var t=Object(l.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({error:""}),t.prev=1,t.next=4,e.context.signin(e.state.login,e.state.password);case 4:e.props.history.push("/"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.setState({error:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(v.a,{children:[Object(p.jsx)(C.a,{lg:6,children:Object(p.jsx)("img",{className:"relative-img",src:"/PIW6Semestr/sushi2.jpg",alt:"sushi"})}),Object(p.jsx)(C.a,{lg:6,children:Object(p.jsxs)(v.a,{children:[Object(p.jsx)(C.a,{lg:3}),Object(p.jsxs)(C.a,{lg:6,className:"content-center",children:[Object(p.jsx)("div",{className:"top-margin",children:Object(p.jsxs)("h1",{children:[Object(p.jsx)("span",{className:"red-span",children:"Sign in"})," to your account"]})}),this.state.error&&Object(p.jsx)(N.a,{variant:"danger",children:this.state.error}),Object(p.jsxs)(f.a,{children:[Object(p.jsxs)(f.a.Group,{children:[Object(p.jsx)(f.a.Label,{children:"Email address"}),Object(p.jsx)(f.a.Control,{onChange:this.onEmailChange,value:this.state.login,type:"email",placeholder:"Email address"})]}),Object(p.jsxs)(f.a.Group,{children:[Object(p.jsx)(f.a.Label,{children:"Password"}),Object(p.jsx)(f.a.Control,{onChange:this.onPasswordChange,value:this.state.password,type:"password",placeholder:"Password"})]}),Object(p.jsx)("br",{}),Object(p.jsx)(x.a,{onClick:this.onLogin,variant:"primary",children:"Sign in"})]})]})]})})]})})}}]),a}(c.a.Component);E.contextType=P;var F=E,L=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={login:"",password:"",repeatPassword:"",error:""},e.onEmailChange=function(t){var a=t.target.value;e.setState({login:a})},e.onPasswordChange=function(t){var a=t.target.value;e.setState({password:a})},e.onRepeatPasswordChange=function(t){var a=t.target.value;e.setState({repeatPassword:a})},e.onRegister=function(){var t=Object(l.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({error:""}),e.state.password===e.state.repeatPassword){t.next=4;break}return e.setState({error:"Passwords are not the same"}),t.abrupt("return");case 4:return t.prev=4,t.next=7,e.context.signup(e.state.login,e.state.password);case 7:e.props.history.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),e.setState({error:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(v.a,{children:[Object(p.jsx)(C.a,{lg:6,children:Object(p.jsx)("img",{className:"relative-img",src:"/PIW6Semestr/sushi2.jpg",alt:"sushi"})}),Object(p.jsx)(C.a,{children:Object(p.jsxs)(v.a,{children:[Object(p.jsx)(C.a,{lg:3}),Object(p.jsxs)(C.a,{lg:6,className:"content-center",children:[Object(p.jsx)("div",{className:"top-margin",children:Object(p.jsxs)("h1",{children:["Register to order your ",Object(p.jsx)("span",{className:"red-span",children:"best sushi!"})]})}),this.state.error&&Object(p.jsx)(N.a,{variant:"danger",children:this.state.error}),Object(p.jsxs)(f.a,{children:[Object(p.jsxs)(f.a.Group,{children:[Object(p.jsx)(f.a.Label,{children:"Email address"}),Object(p.jsx)(f.a.Control,{onChange:this.onEmailChange,value:this.state.login,type:"email",placeholder:"Email address"})]}),Object(p.jsxs)(f.a.Group,{children:[Object(p.jsx)(f.a.Label,{children:"Password"}),Object(p.jsx)(f.a.Control,{onChange:this.onPasswordChange,value:this.state.password,type:"password",placeholder:"Password"})]}),Object(p.jsxs)(f.a.Group,{children:[Object(p.jsx)(f.a.Label,{children:"Repeat password"}),Object(p.jsx)(f.a.Control,{onChange:this.onRepeatPasswordChange,value:this.state.repeatPassword,type:"password",placeholder:"Repeat password"})]}),Object(p.jsx)("br",{}),Object(p.jsx)(x.a,{onClick:this.onRegister,variant:"primary",children:"Sign up"})]})]})]})})]})})}}]),a}(c.a.Component);L.contextType=P;var U=L,A=a(11),R=a(57),T=a(22),W=a(67),B=a(48),G=a(68),D=["component"],M=function(e){var t=e.component,a=Object(G.a)(e,D),c=Object(n.useContext)(P).currentUser;return Object(p.jsx)(A.b,Object(B.a)(Object(B.a)({},a),{},{render:function(e){return c?Object(p.jsx)(t,Object(B.a)({},e)):Object(p.jsx)(A.a,{to:"/login"})}}))},$=(a(61),a(58)),H=c.a.createContext(),z=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(o.a)(a,2),s=c[0],r=c[1],i=Object(n.useContext)(P).currentUser,j={cart:s,addToCart:function(e){var t=Object($.a)(s);t.push(e),r(t),alert("Added to cart")},removeFromCart:function(e){var t=Object($.a)(s);t.splice(e,1),r(t)},updateEntry:function(e,t){alert(e+" "+t),s[e].amount=t,r(s)},placeOrder:function(){alert("Your order has been placed");var e={uid:i.uid,date:Date.now(),cart:s};S.database().ref("orders").push(e),r([])}};return Object(p.jsx)(H.Provider,{value:j,children:t})},J=function(e){var t=Object(n.useState)(1),a=Object(o.a)(t,2),c=a[0],s=a[1],r=Object(n.useContext)(P).currentUser,i=Object(n.useContext)(H).addToCart,j=Object(A.g)();return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(v.a,{className:"margin",children:[Object(p.jsx)(C.a,{lg:3}),Object(p.jsx)(C.a,{lg:3,children:Object(p.jsxs)("div",{className:"item",children:[Object(p.jsx)("img",{className:"menu-img",src:"/PIW6Semestr/futomaki.png",alt:"futomaki"}),Object(p.jsxs)("div",{className:"item-desc",children:[Object(p.jsx)("h3",{className:"red-span item-name",children:e.data.name}),Object(p.jsx)("p",{className:"item-ingredient",children:e.data.ingredient}),Object(p.jsx)("p",{className:"item-price",children:Object(p.jsxs)("b",{children:["$",e.data.price]})})]})]})}),Object(p.jsxs)(C.a,{lg:3,children:[Object(p.jsx)(v.a,{children:Object(p.jsx)(C.a,{children:Object(p.jsx)("h4",{children:e.data.description})})}),Object(p.jsx)("br",{}),Object(p.jsxs)(v.a,{children:[Object(p.jsx)(C.a,{lg:3}),Object(p.jsx)(C.a,{lg:2,children:Object(p.jsx)(x.a,{onClick:function(e){1!==c&&s(c-1)},children:"-"})}),Object(p.jsx)(C.a,{lg:2,children:Object(p.jsx)("p",{children:c})}),Object(p.jsx)(C.a,{lg:2,children:Object(p.jsx)(x.a,{onClick:function(e){s(c+1)},children:"+"})}),Object(p.jsx)(C.a,{lg:3})]}),Object(p.jsx)("br",{}),Object(p.jsx)(v.a,{children:Object(p.jsx)(C.a,{children:Object(p.jsx)(x.a,{onClick:function(t){if(null!=r){var a={item:e.data,amount:c};i(a)}else j.push("/login")},variant:"primary",children:"Add to cart"})})})]})]})})},X=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={menuItems:[],filteredItems:[]},e.componentWillMount=function(){e.fetchMenu()},e.fetchMenu=function(){S.database().ref("menu_items").on("value",(function(t){var a=t.val(),n=[];for(var c in a)n.push(a[c]);e.setState({menuItems:n,filteredItems:n})}))},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.state.filteredItems.map((function(t,a){return Object(p.jsx)(J,{data:t,history:e.props.history},a)}));return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(v.a,{className:"menu-content",children:[Object(p.jsx)("h1",{className:"red-span",children:"OUR MENU"}),t]})})}}]),a}(c.a.Component),Y=a(21),_=(a(62),function(e){var t=Object(n.useState)(e.data.amount),a=Object(o.a)(t,2),c=a[0],s=a[1],r=Object(n.useContext)(H),i=r.updateEntry,j=r.removeFromCart;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Y.a,{className:"item-card",children:Object(p.jsx)(Y.a.Body,{className:"item-card-body",children:Object(p.jsxs)(v.a,{children:[Object(p.jsxs)(C.a,{lg:3,children:[Object(p.jsx)("h3",{className:"red-span item-name",children:e.data.item.name}),Object(p.jsx)("p",{className:"item-ingredient",children:e.data.item.ingredient})]}),Object(p.jsx)(C.a,{lg:5,children:Object(p.jsxs)(v.a,{children:[Object(p.jsx)(C.a,{lg:2}),Object(p.jsx)(C.a,{lg:2,children:Object(p.jsx)(x.a,{onClick:function(t){if(1!==c){var a=c-1;s(a),i(e.index,a)}},children:"-"})}),Object(p.jsx)(C.a,{lg:2,children:Object(p.jsx)("p",{children:c})}),Object(p.jsx)(C.a,{lg:2,children:Object(p.jsx)(x.a,{onClick:function(t){var a=c+1;s(a),i(e.index,a)},children:"+"})}),Object(p.jsx)(C.a,{lg:3})]})}),Object(p.jsxs)(C.a,{lg:2,children:["$",c*e.data.item.price]}),Object(p.jsx)(C.a,{lg:2,children:Object(p.jsxs)(v.a,{children:[Object(p.jsx)(C.a,{lg:11}),Object(p.jsx)(C.a,{lg:1,children:Object(p.jsx)(x.a,{onClick:function(t){j(e.index)},children:"X"})})]})})]})})})})}),K=function(e){var t=Object(n.useContext)(H),a=t.cart,c=t.placeOrder,s=a.map((function(e,t){return Object(p.jsx)(_,{data:e,index:t},t+e.amount+e.item.name)}));return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(v.a,{className:"cart-margin",children:[a.length>0&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(C.a,{lg:2}),Object(p.jsx)(C.a,{lg:5,children:s}),Object(p.jsx)(C.a,{lg:3,children:Object(p.jsx)(Y.a,{children:Object(p.jsxs)(Y.a.Body,{children:[Object(p.jsx)("h3",{children:"Order details"}),Object(p.jsx)("hr",{}),Object(p.jsxs)("h3",{children:["Total to pay: $",function(){var e=0;return a.forEach((function(t,a){e+=t.item.price*t.amount})),e}()]}),Object(p.jsx)("hr",{}),Object(p.jsx)(x.a,{variant:"secondary",onClick:function(){c()},children:"Order"})]})})}),Object(p.jsx)(C.a,{lg:2})]}),(0===a.length||null===a)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(C.a,{lg:4}),Object(p.jsx)(C.a,{lg:4,children:Object(p.jsx)(Y.a,{children:Object(p.jsx)(Y.a.Body,{children:"Your cart is empty"})})}),Object(p.jsx)(C.a,{lg:4})]})]})})},Q=(a(63),function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],s=a[1],r=e.data.cart.map((function(e,t){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(v.a,{children:[Object(p.jsxs)(C.a,{lg:6,children:[Object(p.jsx)("h3",{className:"red-span item-name",children:e.item.name}),Object(p.jsx)("p",{className:"item-ingredient",children:e.item.ingredient})]}),Object(p.jsxs)(C.a,{lg:6,children:[Object(p.jsxs)("p",{className:"item-ingredient",children:["Amount: ",e.amount]}),Object(p.jsxs)("p",{className:"item-ingredient",children:["Price: $",e.amount*e.item.price]})]})]})})}));return Object(p.jsxs)("div",{className:"history-item",children:[Object(p.jsxs)(x.a,{className:"dropdown-toggle history-toggle",onClick:function(e){s(!c)},children:[Object(p.jsxs)("h2",{children:["Order: ",e.data.date]}),"Ordered: ",function(e){var t=new Date(e);return t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()+", "+t.getHours()+":"+t.getMinutes()}(e.data.date),Object(p.jsx)("br",{}),"Total: $",function(){var t=0;return e.data.cart.forEach((function(e,a){t+=e.item.price*e.amount})),t}(),Object(p.jsx)("br",{}),!c&&Object(p.jsx)(p.Fragment,{children:"Click to toggle details"}),c&&Object(p.jsx)(p.Fragment,{children:"Click to hide details"})]}),c&&Object(p.jsx)(Y.a,{children:Object(p.jsx)(Y.a.Body,{className:"history-card",children:r})})]})}),q=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],s=a[1],r=Object(n.useContext)(P).currentUser;Object(n.useEffect)((function(){S.database().ref("orders").on("value",(function(e){var t=e.val(),a=[];for(var n in t)t[n].uid===r.uid&&a.push(t[n]);s(a)}))}));var i=c.map((function(e,t){return Object(p.jsx)(Q,{data:e,index:t},t+e.date)}));return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(v.a,{className:"history-margin",children:[Object(p.jsx)(C.a,{lg:3}),Object(p.jsx)(C.a,{lg:6,children:i}),Object(p.jsx)(C.a,{lg:3})]})})};var V=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=(t[0],t[1]),c=Object(n.useContext)(P),s=c.currentUser,r=c.signout,i=Object(A.g)(),d=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(""),e.prev=1,e.next=4,r();case 4:i.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a("Failed to sign out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(m.a,{basename:"/PIW6Semestr",children:Object(p.jsxs)(W.a,{fluid:!0,children:[Object(p.jsx)(v.a,{children:Object(p.jsxs)(R.a,{variant:"dark",fixed:"top",children:[Object(p.jsx)(C.a,{lg:4,className:"d-flex justify-content-start",children:Object(p.jsxs)(T.a,{className:"mr-auto",children:[Object(p.jsx)(T.a.Link,{children:Object(p.jsx)(m.b,{className:"nav-link",to:"/",exact:!0,children:"Home"})}),Object(p.jsx)(T.a.Link,{children:Object(p.jsx)(m.b,{className:"nav-link",to:"/menu",children:"Our menu"})})]})}),Object(p.jsx)(C.a,{lg:4,className:"d-flex justify-content-center",children:Object(p.jsx)(R.a.Brand,{children:"Sushi Shop"})}),Object(p.jsxs)(C.a,{lg:4,className:"d-flex justify-content-end",children:[!s&&Object(p.jsxs)(T.a,{className:"mr-auto",children:[Object(p.jsx)(T.a.Link,{children:Object(p.jsx)(m.b,{className:"nav-link",to:"/login",children:"Sign in"})}),Object(p.jsx)(T.a.Link,{children:Object(p.jsx)(m.b,{activeClassName:"active",className:"nav-link",to:"/register",children:"SIGN UP"})})]}),!!s&&Object(p.jsxs)(T.a,{className:"mr-auto",children:[Object(p.jsx)(T.a.Link,{children:Object(p.jsx)(m.b,{className:"nav-link",to:"/history",children:"Order history"})}),Object(p.jsx)(T.a.Link,{children:Object(p.jsx)(m.b,{activeClassName:"active",className:"nav-link",to:"/cart",children:"Cart"})}),Object(p.jsx)(T.a.Link,{children:Object(p.jsx)(x.a,{variant:"link",className:"nav-link",id:"sign-out",onClick:d,children:"SIGN OUT"})})]})]})]})}),Object(p.jsx)(v.a,{fluid:!0,children:Object(p.jsx)(C.a,{children:Object(p.jsxs)(A.d,{children:[Object(p.jsx)(A.b,{path:"/",exact:!0,component:g}),Object(p.jsx)(A.b,{path:"/login",exact:!0,component:F}),Object(p.jsx)(A.b,{path:"/register",exact:!0,component:U}),Object(p.jsx)(A.b,{path:"/menu",exact:!0,component:X}),Object(p.jsx)(M,{path:"/history",exact:!0,component:q}),Object(p.jsx)(M,{path:"/cart",exact:!0,component:K})]})})})]})})})};r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(I,{children:Object(p.jsx)(z,{children:Object(p.jsx)(V,{})})})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.1e4594be.chunk.js.map